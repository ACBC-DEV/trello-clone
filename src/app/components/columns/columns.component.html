<div
  class="flex items-start w-full h-full p-5 grow"
  cdkDropListGroup
  cdkDropList
  cdkDropListOrientation="horizontal"
  (cdkDropListDropped)="dropColumn($event)"
  [cdkDropListData]="columns()"
>
  @if(columns().length > 0) { @for (column of columns(); track column.id) {
  <div
    cdkDrag
    class="relative p-2 mr-3 rounded-3xl bg-zinc-700 w-72 shrink-0 group"
  >
    <button
      (click)="removeColumn(column.id)"
      class="absolute hidden px-3 py-1 end-3 top-3 group-hover:inline-block hover:bg-red-500 rounded-3xl"
    >
      X
    </button>
    <div>
      <div class="flex justify-between">
        <app-column-header [column]="column" />
      </div>
      <div
        class="mt-2 text-sm min-h-8 card-contend"
        cdkDropListOrientation="vertical"
        cdkDropList
        (cdkDropListDropped)="drop($event)"
        [cdkDropListData]="column.items"
      >
        @for (item of column.items; track item.id) { @if (item.isEditing) {
        <form
          cdkDrag
          class="mt-2 duration-150 cursor-pointer bg-zinc-800 hover:bg-opacity-65"
        >
          <input class="w-full" type="text" />
        </form>
        }@else {

        <app-item
          (open)="toggleOpen(column.id, item.id)"
          (remove)="removeItem(column.id, item.id)"
          >{{ item.name }}</app-item
        >

        } }
      </div>
      @if(column.isAdding){
      <app-add-item [columnId]="column.id" />
      }@else{
      <div
        (click)="toggleAdditionState(column.id)"
        class="p-2 mt-2 overflow-hidden duration-150 bg-transparent rounded cursor-pointer hover:bg-opacity-65"
      >
        + Add Item
      </div>
      }
    </div>
  </div>
  }@empty {
  <div
    class="h-64 p-2 mr-3 rounded-3xl bg-zinc-700 w-72 shrink-0 animate-pulse"
  ></div>
  <div
    class="h-64 p-2 mr-3 rounded-3xl bg-zinc-700 w-72 shrink-0 animate-pulse"
  ></div>
  <div
    class="h-64 p-2 mr-3 rounded-3xl bg-zinc-700 w-72 shrink-0 animate-pulse"
  ></div>
  } }
  <app-add-column />
</div>
@if(itemDialog()?.isOpen){
<app-dialog-rows [infoRow]="itemDialog()" (close)="closeModal()" />
}
